{% extends "base.html" %}

{% block content %}
<h1>ğŸ“Š Gastos por Empleado</h1>

<input type="text" id="buscador" placeholder="ğŸ” Buscar empleado..." style="width: 100%; padding: 10px; margin-bottom: 20px; border-radius: 6px; border: 1px solid #ccc; font-size: 1rem;">

<table id="tabla-empleados">
  <thead>
    <tr>
      <th>Legajo</th>
      <th>Nombre</th>
      <th>CUIL</th>
      <th>Ver Detalle</th>
    </tr>
  </thead>
  <tbody>
    {% for legajo, emp in empleados.items() %}
      <tr>
        <td>{{ legajo }}</td>
        <td>{{ emp.nombre }} {{ emp.apellido }}</td>
        <td>{{ emp.cuil }}</td>
        <td><a href="/gastos/{{ legajo }}">ğŸ‘ï¸ Ver</a></td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<a href="/panel" class="volver">â¬…ï¸ Volver al Panel</a>

<script>
  document.getElementById("buscador").addEventListener("input", function () {
    const filtro = this.value.toLowerCase();
    const filas = document.querySelectorAll("#tabla-empleados tbody tr");

    filas.forEach(fila => {
      const texto = fila.textContent.toLowerCase();
      fila.style.display = texto.includes(filtro) ? "" : "none";
    });
  });
</script>
{% endblock %}
